webpackJsonp([11],{M5CR:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Xxa5"),s=a.n(r),i=a("exGp"),n=a.n(i),o=a("Dd8w"),c=a.n(o),l=a("ra3+"),_=a("NYxO"),u=a("i84Q"),d=a("Uoa1"),m={data:function(){return{payDetail:!1,showAlert:!1,alertText:null,countNum:0,timeLimit:900,gotoOrders:!1}},components:{headTop:l.a,alertTip:d.a},created:function(){this.initData(),this.shopid&&this.CLEAR_CART(this.shopid)},mounted:function(){},beforeDestroy:function(){clearInterval(this.timer)},props:[],computed:c()({},Object(_.d)(["orderMessage","userInfo","storeId","cartPrice"]),{remaining:function(){var t=parseInt(this.countNum/60);t<10&&(t="0"+t);var e=parseInt(this.countNum%60);return e<10&&(e="0"+e),"00 : "+t+" : "+e}}),methods:c()({},Object(_.c)(["CLEAR_CART"]),{initData:function(){var t=this;return n()(s.a.mark(function e(){var a,r,i,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.j)({order_id:t.orderMessage.order_id});case 2:"0000"===(a=e.sent).return_code?(t.payDetail=a.data,"0"!==a.data.pay_status&&(t.showAlert=!0,t.alertText="怎么回事？该订单已支付了哦！"),r=parseInt(t.payDetail.createtime),i=new Date,n=parseInt(i.getTime().toString().substr(0,10)),r+t.timeLimit<=n&&(t.showAlert=!0,t.alertText="哎呀，订单过期了哦！"),t.countNum=t.timeLimit+r-n,t.remainingTime()):(t.showAlert=!0,t.alertText=t.payDetail.return_msg);case 4:case"end":return e.stop()}},e,t)}))()},remainingTime:function(){var t=this;clearInterval(this.timer),this.timer=setInterval(function(){t.countNum--,0===t.countNum&&(clearInterval(t.timer),t.showAlert=!0,t.alertText="支付超时")},1e3)},confrimPay:function(){this.showAlert=!0,this.alertText="当前环境无法支付",this.gotoOrders=!0},closeTipFun:function(){this.showAlert=!1,this.gotoOrders&&this.$router.push("/order")}})},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rating_page"},[a("head-top",{attrs:{"head-title":"付款","go-back":"true"}}),t._v(" "),a("section",{staticClass:"show_time_amount"},[a("section",[a("header",{staticClass:"time_last"},[t._v("支付剩余时间")]),t._v(" "),a("p",{staticClass:"time"},[t._v(t._s(t.remaining))])])]),t._v(" "),t.payDetail?a("div",{staticClass:"order_info"},[t._v("订单信息")]):t._e(),t._v(" "),t.payDetail?a("section",{staticClass:"order_info_list"},[a("section",{staticClass:"order_item"},[t._m(0),t._v(" "),a("span",{staticClass:"order_no"},[t._v(t._s(t.payDetail.order_id))])]),t._v(" "),a("section",{staticClass:"order_item"},[t._m(1),t._v(" "),a("span",{staticClass:"order_amount"},[t._v("￥"+t._s(parseFloat(t.payDetail.total_amount).toFixed(2)))])]),t._v(" "),a("section",{staticClass:"order_item"},[t._m(2),t._v(" "),a("span",{staticClass:"order_payment"},[t._v(t._s("-1"===t.payDetail.payment?"现金支付":"在线支付"))])])]):t._e(),t._v(" "),a("p",{staticClass:"determine",on:{click:t.confrimPay}},[t._v("确认支付")]),t._v(" "),t.showAlert?a("alert-tip",{attrs:{alertText:t.alertText},on:{closeTip:t.closeTipFun}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"order_icon_contaienr"},[e("span",[this._v("订单号")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"order_icon_contaienr"},[e("span",[this._v("订单金额")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"order_icon_contaienr"},[e("span",[this._v("支付方式")])])}]};var h=a("VU/8")(m,p,!1,function(t){a("Nt2Q")},"data-v-a4923202",null);e.default=h.exports},Nt2Q:function(t,e){}});
//# sourceMappingURL=11.a73505917eccbe03e1f8.js.map