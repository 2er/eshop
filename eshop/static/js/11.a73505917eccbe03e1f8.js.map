{"version":3,"sources":["webpack:///src/page/confirmOrder/children/payment.vue","webpack:///./src/page/confirmOrder/children/payment.vue?0a22","webpack:///./src/page/confirmOrder/children/payment.vue"],"names":["payment","data","payDetail","showAlert","alertText","countNum","timeLimit","gotoOrders","components","headTop","head","alertTip","created","this","initData","shopid","CLEAR_CART","mounted","beforeDestroy","clearInterval","timer","props","computed","extends_default","Object","vuex_esm","remaining","minute","parseInt","second","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","queryData","createTime","nowDate","nowTime","wrap","_context","prev","next","getData","order_id","orderMessage","sent","return_code","pay_status","createtime","Date","getTime","toString","substr","remainingTime","return_msg","stop","_this2","setInterval","confrimPay","closeTipFun","$router","push","children_payment","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","head-title","go-back","_v","_s","_e","_m","parseFloat","total_amount","toFixed","on","click","closeTip","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.a73505917eccbe03e1f8.js","sourcesContent":["<template>\n  <div class=\"rating_page\">\n    <head-top head-title=\"付款\" go-back='true'></head-top>\n    <section class=\"show_time_amount\">\n      <section>\n        <header class=\"time_last\">支付剩余时间</header>\n        <p class=\"time\">{{remaining}}</p>\n      </section>\n    </section>\n    <div class=\"order_info\" v-if=\"payDetail\">订单信息</div>\n    <section class=\"order_info_list\" v-if=\"payDetail\">\n      <section class=\"order_item\">\n        <div class=\"order_icon_contaienr\">\n          <span>订单号</span>\n        </div>\n        <span class=\"order_no\">{{payDetail.order_id}}</span>\n      </section>\n      <section class=\"order_item\">\n        <div class=\"order_icon_contaienr\">\n          <span>订单金额</span>\n        </div>\n        <span class=\"order_amount\">￥{{parseFloat(payDetail.total_amount).toFixed(2)}}</span>\n      </section>\n      <section class=\"order_item\">\n        <div class=\"order_icon_contaienr\">\n          <span>支付方式</span>\n        </div>\n        <span class=\"order_payment\">{{payDetail.payment === '-1' ? '现金支付' : '在线支付'}}</span>\n      </section>\n    </section>\n    <p class=\"determine\" @click=\"confrimPay\">确认支付</p>\n    <alert-tip v-if=\"showAlert\" @closeTip=\"closeTipFun\" :alertText=\"alertText\"></alert-tip>\n  </div>\n</template>\n\n<script>\nimport headTop from '../../../components/header/head'\nimport {mapState, mapMutations} from 'vuex'\nimport {queryOrder} from '../../../service/getData'\nimport alertTip from '../../../components/common/alertTip'\n\nexport default {\n  data () {\n    return {\n      payDetail: false, // 付款信息详情\n      showAlert: false,\n      alertText: null,\n      countNum: 0, // 倒计时\n      timeLimit: 900, // 过期时间\n      gotoOrders: false // 去付款\n    }\n  },\n  components: {\n    headTop,\n    alertTip\n  },\n  created () {\n    this.initData()\n    // 清除购物车中当前商铺的信息\n    if (this.shopid) {\n      this.CLEAR_CART(this.shopid)\n    }\n  },\n  mounted () {\n    // this.remainingTime()\n  },\n  beforeDestroy () {\n    clearInterval(this.timer)\n  },\n  props: [],\n  computed: {\n    ...mapState([\n      'orderMessage', 'userInfo', 'storeId', 'cartPrice'\n    ]),\n    // 时间转换\n    remaining: function () {\n      let minute = parseInt(this.countNum / 60)\n      if (minute < 10) {\n        minute = '0' + minute\n      }\n      let second = parseInt(this.countNum % 60)\n      if (second < 10) {\n        second = '0' + second\n      }\n      return '00 : ' + minute + ' : ' + second\n    }\n  },\n  methods: {\n    ...mapMutations([\n      'CLEAR_CART'\n    ]),\n    // 初始化信息\n    async initData () {\n      let queryData = await queryOrder({order_id: this.orderMessage.order_id})\n      if (queryData.return_code === '0000') {\n        this.payDetail = queryData.data\n        if (queryData.data.pay_status !== '0') {\n          this.showAlert = true\n          this.alertText = '怎么回事？该订单已支付了哦！'\n        }\n        let createTime = parseInt(this.payDetail.createtime)\n        let nowDate = new Date()\n        let nowTime = parseInt(nowDate.getTime().toString().substr(0, 10))\n        if (createTime + this.timeLimit <= nowTime) {\n          this.showAlert = true\n          this.alertText = '哎呀，订单过期了哦！'\n        }\n        this.countNum = this.timeLimit + createTime - nowTime\n        this.remainingTime()\n      } else {\n        this.showAlert = true\n        this.alertText = this.payDetail.return_msg\n      }\n    },\n    // 倒计时\n    remainingTime () {\n      clearInterval(this.timer)\n      this.timer = setInterval(() => {\n        this.countNum--\n        if (this.countNum === 0) {\n          clearInterval(this.timer)\n          this.showAlert = true\n          this.alertText = '支付超时'\n        }\n      }, 1000)\n    },\n    // 确认付款\n    confrimPay () {\n      this.showAlert = true\n      this.alertText = '当前环境无法支付'\n      this.gotoOrders = true\n    },\n    // 关闭提示框，跳转到订单列表页\n    closeTipFun () {\n      this.showAlert = false\n      if (this.gotoOrders) {\n        this.$router.push('/order')\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  @import '../../../assets/css/mixin';\n\n  .rating_page{\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #f5f5f5;\n    z-index: 204;\n    padding-top: 1.95rem;\n    p, span{\n      font-family: Helvetica Neue,Tahoma,Arial;\n    }\n  }\n  .show_time_amount{\n    background-color: #fff;\n    padding: .7rem;\n    text-align: center;\n    .time_last{\n      @include sc(.6rem, #666);\n      margin-top: 1rem;\n    }\n    .time{\n      @include sc(1.5rem, #333);\n      margin: .3rem 0 1rem;\n    }\n    .order_detail{\n      @include fj;\n      span{\n        @include sc(.65rem, #666);\n      }\n      span:nth-of-type(2){\n        color: #ff6000;\n        font-weight: bold;\n      }\n    }\n  }\n  .order_info{\n    background-color: #f1f1f1;\n    padding: 0 .7rem;\n    @include sc(.7rem, #666);\n    line-height: 1.8rem;\n  }\n  .order_info_list{\n    background-color: #fff;\n    @include sc(.6rem, #666);\n    .order_item{\n      padding: .4rem .7rem;\n      @include fj;\n      align-items: center;\n      line-height: 2.6rem;\n      border-bottom: 0.025rem solid #f5f5f5;\n      .order_icon_contaienr{\n        @include fj;\n        align-items: center;\n      }\n      .order_no{\n        @include sc(.7rem, #666);\n      }\n      .order_amount{\n        @include sc(.7rem, #ff6000);\n      }\n    }\n  }\n  .determine{\n    background-color: #4cd964;\n    @include sc(.7rem, #fff);\n    text-align: center;\n    margin: 0 .7rem;\n    line-height: 1.8rem;\n    border-radius: 0.2rem;\n    margin-top: 0.5rem;\n    font-weight: bold;\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/page/confirmOrder/children/payment.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rating_page\"},[_c('head-top',{attrs:{\"head-title\":\"付款\",\"go-back\":\"true\"}}),_vm._v(\" \"),_c('section',{staticClass:\"show_time_amount\"},[_c('section',[_c('header',{staticClass:\"time_last\"},[_vm._v(\"支付剩余时间\")]),_vm._v(\" \"),_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.remaining))])])]),_vm._v(\" \"),(_vm.payDetail)?_c('div',{staticClass:\"order_info\"},[_vm._v(\"订单信息\")]):_vm._e(),_vm._v(\" \"),(_vm.payDetail)?_c('section',{staticClass:\"order_info_list\"},[_c('section',{staticClass:\"order_item\"},[_vm._m(0),_vm._v(\" \"),_c('span',{staticClass:\"order_no\"},[_vm._v(_vm._s(_vm.payDetail.order_id))])]),_vm._v(\" \"),_c('section',{staticClass:\"order_item\"},[_vm._m(1),_vm._v(\" \"),_c('span',{staticClass:\"order_amount\"},[_vm._v(\"￥\"+_vm._s(parseFloat(_vm.payDetail.total_amount).toFixed(2)))])]),_vm._v(\" \"),_c('section',{staticClass:\"order_item\"},[_vm._m(2),_vm._v(\" \"),_c('span',{staticClass:\"order_payment\"},[_vm._v(_vm._s(_vm.payDetail.payment === '-1' ? '现金支付' : '在线支付'))])])]):_vm._e(),_vm._v(\" \"),_c('p',{staticClass:\"determine\",on:{\"click\":_vm.confrimPay}},[_vm._v(\"确认支付\")]),_vm._v(\" \"),(_vm.showAlert)?_c('alert-tip',{attrs:{\"alertText\":_vm.alertText},on:{\"closeTip\":_vm.closeTipFun}}):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"order_icon_contaienr\"},[_c('span',[_vm._v(\"订单号\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"order_icon_contaienr\"},[_c('span',[_vm._v(\"订单金额\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"order_icon_contaienr\"},[_c('span',[_vm._v(\"支付方式\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a4923202\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/confirmOrder/children/payment.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a4923202\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./payment.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./payment.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./payment.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a4923202\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./payment.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-a4923202\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/confirmOrder/children/payment.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}