webpackJsonp([14],{oXvl:function(t,s){},vY2v:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=e("Xxa5"),a=e.n(n),o=e("exGp"),i=e.n(o),c=e("Dd8w"),r=e.n(c),l=e("NYxO"),_=e("ra3+"),u=e("i84Q"),p=e("MfVK"),v=e("Uoa1"),d={name:"seller_coupon",data:function(){return{couponId:null,coupon:{},showAlert:!1,alertText:null,duration:2e3}},created:function(){this.couponId=this.$route.params.coupon_id,this.getCoupon()},mixins:[],computed:r()({},Object(l.d)(["sessionId"])),components:{headTop:_.a,alertTip:v.a},props:[],methods:{getCoupon:function(){var t=this;return i()(a.a.mark(function s(){var e;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(u.p)({coupon_id:t.couponId});case 2:"0000"===(e=s.sent).return_code&&(t.coupon=e.data.coupon);case 4:case"end":return s.stop()}},s,t)}))()},drawCoupon:function(){var t=this;return i()(a.a.mark(function s(){var e;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(u.e)({cid:t.couponId});case 2:if("0000"!==(e=s.sent).return_code){s.next=10;break}return t.coupon.left_num=NaN!==parseInt(e.data.left_num)?parseInt(e.data.left_num):0,t.coupon.quantity=t.coupon.quantity-1,Object(p.Toast)({duration:t.duration,message:"领取成功",type:"text"}),s.abrupt("return",!0);case 10:return t.showAlert=!0,t.alertText=e.return_msg,s.abrupt("return",!1);case 13:case"end":return s.stop()}},s,t)}))()},closeTipFun:function(){this.showAlert=!1,this.alertText=null}}},C={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"rating_page"},[e("head-top",{attrs:{"head-title":t.coupon.title,goBack:"true"}}),t._v(" "),e("section",{staticClass:"header_img"},[e("img",{staticClass:"food_img",attrs:{src:t.coupon.logo_url}})]),t._v(" "),e("section",{staticClass:"detail_container"},[e("section",{staticClass:"titles"},[e("section",{staticClass:"sub_title"},[e("p",{staticClass:"sub_title_content"},[t._v(t._s(t.coupon.sub_title))]),t._v(" "),e("p",{staticClass:"sub_title_left",class:{sub_title_left_warning:t.coupon.quantity<10}},[t._v("剩余"+t._s(t.coupon.quantity)+"张")])]),t._v(" "),e("section",{staticClass:"detail_title"},[e("p",{staticClass:"coupon_title"},[t._v(t._s(t.coupon.title))]),t._v(" "),e("p",{staticClass:"coupon_sale_count"},[t._v("已领"+t._s(t.coupon.get_count)+"张")])]),t._v(" "),e("div",{staticClass:"cover"})]),t._v(" "),e("section",{staticClass:"detail_store"},[e("p",{staticClass:"store_title"},[t._v("适用门店")]),t._v(" "),e("ul",{staticClass:"store_list"},t._l(t.coupon.stores,function(s){return e("li",{key:s.store_id,staticClass:"store_item"},[e("p",{staticClass:"store_name"},[t._v(t._s(s.store_name))]),t._v(" "),e("section",{staticClass:"store_addr"},[e("p",{staticClass:"location_icon"},[e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#location"}})])]),t._v(" "),e("p",{staticClass:"addr"},[e("span",[t._v(t._s(s.addr))])]),t._v(" "),e("p",{staticClass:"phone_icon"},[e("a",{attrs:{href:"tel:"+s.tel}},[e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#phone"}})])])])])])}))]),t._v(" "),e("section",{staticClass:"detail_rule"},[e("p",{staticClass:"rule_title"},[t._v("优惠内容")]),t._v(" "),e("p",{staticClass:"rule_content"},[t._v(t._s(t.coupon.rule_content||"暂无内容"))])]),t._v(" "),e("section",{staticClass:"detail_notice"},[e("p",{staticClass:"notice_title"},[t._v("购买须知")]),t._v(" "),e("p",{staticClass:"notice_date_title"},[t._v("有效期")]),t._v(" "),e("p",{staticClass:"notice_date_content"},[t._v(t._s(t.coupon.validate_time))]),t._v(" "),e("p",{staticClass:"notice_notice_title"},[t._v("使用提示")]),t._v(" "),e("p",{staticClass:"notice_notice_content"},[t._v(t._s(t.coupon.notice||"暂无内容"))]),t._v(" "),e("p",{staticClass:"notice_intro_title"},[t._v("详细描述")]),t._v(" "),e("p",{staticClass:"notice_intro_content"},[t._v(t._s(t.coupon.description))])]),t._v(" "),e("p",{staticClass:"for_fixed"})]),t._v(" "),e("section",{staticClass:"buy_cart_container"},[t.coupon.quantity?t.coupon.left_num&&0!==parseInt(t.coupon.left_num)?e("div",{staticClass:"btn_green",on:{click:t.drawCoupon}},[t._v("免费领取")]):e("div",{staticClass:"btn_gray"},[t._v("已领取")]):e("div",{staticClass:"btn_gray"},[t._v("库存不足")])]),t._v(" "),t.showAlert?e("alert-tip",{attrs:{alertText:t.alertText},on:{closeTip:t.closeTipFun}}):t._e()],1)},staticRenderFns:[]};var f=e("VU/8")(d,C,!1,function(t){e("oXvl")},"data-v-20084cb0",null);s.default=f.exports}});
//# sourceMappingURL=14.f8fc2e76eb571ae1b57c.js.map